<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/basic :: setContent(~{this::content} )}">
    <th:block th:fragment="content">

        <!-- Begin Page Content -->
        <!-- Page Heading -->
        <h1 class="h3 mb-2 text-gray-800">발주요청</h1>
        <!-- page card -->
        <div class="card shadow mb-4">


            <!-- card-header -->
            <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary">목록</h6></div>
            <!-- card-body -->
            <div class="card-body">
                <!-- <div class="table-responsive"> -->
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">품목코드</th>
                            <th scope="col">품목이름</th>
                            <th scope="col">거래처명</th>
                            <th scope="col">수량</th>
                            <th scope="col">단가</th>
                            <th scope="col">금액</th>
                            <th scope="col">담당자</th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="dto: ${result.dtoList}">
                            <td><input type="checkbox" name="contract" value="${dto.cno}"></td>
                            <th><a th:href="@{/order/register(ccode=${dto.ccode}, page=${result.page})}">[[${dto.ccode}]]</a></th>
                            <td>[[${dto.pname}]]</td>
                            <td>[[${dto.cpartnername}]]</td>
                            <td>[[${dto.pcount}]]</td>
                            <td>[[${dto.pprice}]]</td>
                            <td>[[${dto.pprice}*${dto.pcount}]]</td>
                            <td>[[${dto.cmanager}]]</td>
                        </tr>
                        </tbody>
                    </table>

                    <!-- 하단 페이지 버튼 -->
                    <ul class="pagination h-100 justify-content-center align-items-center">
                        <li class="page-item " th:if="${result.prev}">
                            <a class="page-link"
                               th:href="@{/product/list(page= ${result.start -1})}"
                               typetabindex="-1">
                                Pre
                            </a>
                        </li>

                        <li th:class=" 'page-item ' + ${result.page == page?'active':''} " th:each="page: ${result.pageList}">
                            <a class="page-link"
                               th:href="@{/product/list(page = ${page})}">
                                [[${page}]]
                            </a>
                        </li>

                        <li class="page-item" th:if="${result.next}">
                            <a class="page-link"
                               th:href="@{/product/list(page= ${result.end + 1})}">
                                Next
                            </a>
                        </li>
                    </ul><!-- 하단 페이지 버튼 -->

                    <div style="float: right">

                        <a th:href="@{/order/register}">
                            <button class="btn btn-outline-secondary registBtn" type="button">발주등록</button>
                        </a>
                    </div>

                    <!-- 모달창 처리-->
                    <div class="modal" tabindex="-1" role="dialog">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">변경사항</h5>
                                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>정상적으로 처리되었습니다.</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                                    <!--                                    <button type="button" class="btn btn-primary">확인</button>-->
                                </div>
                            </div>
                        </div>
                    </div><!-- 신규등록완료시 뜨는 모달창 처리-->

                    <script th:inline="javascript">
                        /* 신규등록완료시 뜨는 모달창 처리 */
                        var msg = [[${msg}]];
                        console.log(msg);
                        if(msg){
                            $(".modal").modal();
                        }/* 신규등록완료시 뜨는 모달창 처리 */


                    </script>

                </div><!-- <div class="table-responsive"> -->
            </div><!-- card-body -->
        </div><!-- page card -->
        <!-- End Page Content -->
    </th:block>
</th:block>
